{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Select Subcategory</title>
    <link rel="stylesheet" href="{% static 'quizzes/css/wizard.css' %}" />
  </head>

  <body>
    <div class="wizard-container">
      <!-- Step Indicator -->
      <div class="steps">
        <div class="step completed">1. Category</div>
        <div class="step active">2. Subcategory</div>
        <div class="step">3. Difficulty</div>
        <div class="step">4. Start</div>
      </div>

      <h2 class="wizard-title">Choose a Subcategory</h2>
      <p class="wizard-subtitle">
        Category: <strong>{{ parent.category.name }}</strong> ‚Üí
        <strong>{{ parent.name }}</strong>
      </p>

      <div class="wizard-grid">
        {% for child in children %} {% if child.is_leaf %}
        <!-- LEAF ‚Üí choose difficulty -->
        <a
          href="{% url 'quizzes:choose_difficulty' child.id %}"
          class="wizard-card"
        >
          üîπ <strong>{{ child.name }}</strong>
          <p>
            {% if child.description %} {{ child.description }} {% else %} Select
            difficulty for this topic {% endif %}
          </p>
        </a>
        {% else %}
        <!-- HAS CHILDREN ‚Üí go to next level -->
        <a
          href="{% url 'quizzes:subcategory_children' child.id %}"
          class="wizard-card"
        >
          üìÅ <strong>{{ child.name }}</strong>
          <p>
            {% if child.description %} {{ child.description }} {% else %}
            Explore more topics inside this category {% endif %}
          </p>
        </a>
        {% endif %} {% empty %}
        <p>No subcategories available.</p>
        {% endfor %}
      </div>

      <!-- Back Button -->
      <div style="margin-top: 20px; text-align: center">
        <a
          href="{% url 'quizzes:subcategories' parent.category.id %}"
        >
          ‚Üê Back to {{ parent.category.name }}
        </a>
      </div>
    </div>
  </body>
</html>

