{% extends "quizzes/base_quiz.html" %}
{% block title %}Quiz Results â€” {{ quiz_attempt.subcategory.name }}{% endblock %}

{% block quiz_content %}
<div style="display:flex;align-items:center;gap:16px;justify-content:space-between;">
  <div>
    <h2 class="q-text">Your Score: {{ percentage }}%</h2>
    <p class="muted">You answered {{ correct }} correctly out of {{ total }}.</p>
  </div>
  <div style="text-align:right">
    <div style="font-size:28px;font-weight:700;color:var(--accent)">{{ percentage }}%</div>
    <div class="muted">Grade: <strong>{{ grade }}</strong></div>
  </div>
</div>

<hr style="margin:18px 0; border-color: rgba(255,255,255,0.03)">

<h3 style="margin-bottom:10px">Review Questions</h3>
<ol style="padding-left:18px">
  {% for q in quiz_attempt.questions %}
  <li style="margin-bottom:14px">
    <p style="margin:0 0 6px 0; font-weight:600">{{ q.question }}</p>
    <div class="muted" style="font-size:14px">A. {{ q.option_a }} &nbsp; | &nbsp; B. {{ q.option_b }} &nbsp; | &nbsp; C.
      {{ q.option_c }} &nbsp; | &nbsp; D. {{ q.option_d }}</div>
    <div style="margin-top:6px">
      <span style="font-weight:700; color: {% if q.is_correct %}var(--accent){% else %}var(--danger){% endif %}">Your
        answer: {{ q.user_answer|default:"-" }}</span>
      {% if not q.is_correct %}
      <span class="muted" style="margin-left:12px">Correct: {{ q.correct_answer }}</span>
      {% endif %}
    </div>
    {% if q.explanation %}
    <div style="margin-top:6px; color: var(--muted); font-size:13px"><em>Explanation:</em> {{ q.explanation }}</div>
    {% endif %}
  </li>
  {% endfor %}
</ol>

<div style="margin-top:12px; display:flex; gap:10px;">
  <a class="btn" href="{% url 'quizzes:dashboard' %}">Back to Dashboard</a>
  <a class="btn secondary" href="{% url 'quizzes:quiz_selector' %}">Try another quiz</a>
</div>
{% endblock %}